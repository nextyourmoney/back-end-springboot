{"version":3,"file":"js/72.b01c1308.js","mappings":"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","sources":["webpack://front-end-vue/./node_modules/js-file-download/file-download.js","webpack://front-end-vue/./src/apis/board.js","webpack://front-end-vue/./src/views/menu07/board/Read.vue","webpack://front-end-vue/./src/views/menu07/board/Read.vue?a213"],"sourcesContent":["module.exports = function(data, filename, mime, bom) {\n    var blobData = (typeof bom !== 'undefined') ? [bom, data] : [data]\n    var blob = new Blob(blobData, {type: mime || 'application/octet-stream'});\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    }\n    else {\n        var blobURL = (window.URL && window.URL.createObjectURL) ? window.URL.createObjectURL(blob) : window.webkitURL.createObjectURL(blob);\n        var tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n\n        // Fixes \"webkit blob resource error 1\"\n        setTimeout(function() {\n            document.body.removeChild(tempLink);\n            window.URL.revokeObjectURL(blobURL);\n        }, 200)\n    }\n}\n","import axios from \"axios\";\nimport apiAuth from \"@/apis/auth\";\n\n//게시물 목록 요청 //통신 모듈처럼사용된다\nasync function getBoardList(pageNo = 1) {\n    let response = null;\n    try {\n        response = await axios.get(\"/board/list\", { params: { pageNo: pageNo } });\n        return { result: \"success\", data: response.data }; //데이터에 결과 값을 저장한다.\n        // console.log(response);\n    } catch (error) {\n        console.log(error);\n        if (error.response) {\n            //서버 응답이 있다.\n            if (error.response.status === 403) {\n                if (await apiAuth.refreshToken()) { //또한 보안을 위해서 접근 토큰은 짧게, 리플래쉬는 자주 하여 반복한다. 이를 통해 노출, 탈취가 되더라도 예방\n                    //설령 만료가 되었더라도 아직 로그인 상태라면 시간 상관 없이 접근 할 수 있도록 사용자 모르게 언제나 리플레시ㅟ 진행\n                    response = await axios.get(\"/board/list\", { params: { pageNo: pageNo } });\n                    return { result: \"success\", data: response.data }; //데이터에 결과 값을 저장한다.\n                }\n            }\n        } else {\n            //서버 응답이 없다. 즉 네트워크 오류\n            return { result: \"fail\" };\n        }\n    }\n    if (response != null) {\n        //json 리턴의 값이 data이다. 그 뭐냐 vue의 data값이다.\n        return response.data;\n    } else {\n        return null;\n    }\n}\n\n//게시물 쓰기\n// 게시물 쓰기 (멀티 파트)\nasync function createBoard(multipartFormData) {\n    let dbBoard = null;\n    try {\n        const response = await axios.post(\"/board/\", multipartFormData);\n        dbBoard = response.data;\n    } catch (error) {\n        if (error.response) {\n            //서버 응답이 있다.\n            if (error.response.status === 403) {\n                if (await apiAuth.refreshToken()) {\n                    const response = await axios.post(\"/board/\", multipartFormData);\n                    dbBoard = response.data;\n                }\n            }\n        }\n    }\n\n    return dbBoard;\n}\n\n//게시물 가져오기\nasync function readBoard(bno, hit) {\n    let board = null;\n    try {\n        const response = await axios.get(`/board/${bno}?hit=${hit}`);\n        board = response.data;\n    } catch (error) {\n        if (error.response) {\n            //서버 응답이 있다.\n            if (error.response.status === 403) {\n                if (await apiAuth.refreshToken()) {\n                    const response = await axios.get(`/board/${bno}?hit=${hit}`);\n                    board = response.data;\n                }\n            }\n        }\n    }\n\n    return board;\n}\n\n//파일 다운로드\nasync function downloadBoardAttach(bno) {\n    let blob = null;\n\n    try {\n        const response = await axios.get(`/board/battach/${bno}`, { responseType: \"blob\" }); //blob타입의 데이터 타입이 들어가야 동작한다.는 조건\n        blob = response.data;\n    } catch (error) {\n        if (error.response) {\n            //서버 응답이 있다.\n            if (error.response.status === 403) {\n                if (await apiAuth.refreshToken()) {\n                    const response = await axios.get(`/board/battach/${bno}`, { responseType: \"blob\" }); //blob타입의 데이터 타입이 들어가야 동작한다.는 조건\n                    blob = response.data;\n                }\n            }\n        }\n    }\n\n    return blob;\n}\n\n//게시글 삭제\nasync function deleteBoard(bno) {\n    let result = null;\n\n    try {\n        const response = await axios.delete(`/board/${bno}`);\n        result = response.data.result; //spring에서  result라는 값으로 넘어가기 때문에\n    } catch (error) {\n        if (error.response) {\n            //서버 응답이 있다.\n            if (error.response.status === 403) {\n                if (await apiAuth.refreshToken()) {\n                    const response = await axios.delete(`/board/${bno}`);\n                    result = response.data.result; //spring에서  result라는 값으로 넘어가기 때문에\n                }\n            }\n        }\n    }\n\n    return result;\n}\n\nasync function updateBoard(multipartFormData) {\n    let dbBoard = null;\n\n    try {\n        const response = await axios.put(`/board/`, multipartFormData);\n        dbBoard = response.data;\n    } catch (error) {\n        if (error.response) {\n            //서버 응답이 있다.\n            if (error.response.status === 403) {\n                if (await apiAuth.refreshToken()) {\n                    const response = await axios.put(`/board/`, multipartFormData);\n                    dbBoard = response.data;\n                }\n            }\n        }\n    }\n    return dbBoard;\n}\n\n//내보내기\nexport default {\n    getBoardList,\n    createBoard,\n    readBoard,\n    downloadBoardAttach,\n    deleteBoard,\n    updateBoard,\n};\n","<template>\n    <div class=\"card\">\n        <div class = \"card-header\">\n            Read\n        </div>\n        <div class=\"card-body\">\n            <div v-if=\"board != null\">\n                <div class=\"d-flex\">\n                    <div>\n                        <p>bno: {{board.bno}}</p>\n                        <p>btitle: {{board.btitle}}</p>\n                        <p>bcontent: {{board.bcontent}}</p>\n                        <p>mid: {{board.mid}}</p>\n                        <p>bdate: {{new Date(board.bdate).toLocaleDateString()}}</p>\n                        <p>bhitcount: {{board.bhitcount}}</p>\n                        <p v-if=\"board.battachoname\">\n                            battach: {{board.battachoname}}\n                            <button @click=\"downloadBattach\" class=\"btn btn-info btn-sm ml-2\"> 다운로드</button>    \n                        </p>\n                    </div>\n                    <div class=\"ml-5\">\n                        <img v-if=\"board.battachoname != null\" :src=\"battach\" width=\"300\"/>\n                    </div>\n                </div>\n                <div>\n                    <router-link :to=\"`/menu07/board/list?pageNo=${pageNo}`\" class=\"btn btn-info btn-sm mr-2\">목록</router-link>\n                    <router-link :to=\"`/menu07/board/updateform?bno=${bno}&pageNo=${pageNo}`\" \n                        class=\"btn btn-info btn-sm mr-2\">수정</router-link>\n                    <button class=\"btn btn-info btn-sm mr-2\" @click=\"handleRemove\">삭제</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</template>\n\n<script setup>\n    import { useRoute, useRouter } from \"vue-router\";\n    import apiBoard from \"@/apis/board\";\n    import {ref } from \"vue\";\n    import fileDownload from \"js-file-download\";\n\n    const rout = useRoute();\n    const bno = rout.query.bno;\n    const pageNo = rout.query.pageNo;\n    const hit = rout.query.hit;\n    const board = ref(null);\n    const battach = ref(null);\n    const router = useRouter();\n\n    async function getBoard(){\n        // const dbBoard  = await apiBoard.reaadBoard(bno, hit);\n        // board.value = dbBoard;\n        // const blob = await apiBoard.downloadBoardAttach(bno);\n\n        apiBoard.readBoard(bno, hit)\n        .then((data)=>{\n            board.value = data;\n        });\n\n        const blob = await apiBoard.downloadBoardAttach(bno);\n        if(blob != null){\n            battach.value = URL.createObjectURL(blob);\n        }\n\n    }\n\n    getBoard();\n\n    async function downloadBattach(){\n        const blob = await apiBoard.downloadBoardAttach(bno);\n        if(blob != null){\n            fileDownload(blob, board.value.battachoname);\n        }\n    }\n\n    async function handleRemove(){\n        const result = await apiBoard.deleteBoard(bno);\n        if(result === \"success\"){\n            router.push(`/menu07/board/list?pageNo=${pageNo}`)\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>","import script from \"./Read.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Read.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["module","exports","data","filename","mime","bom","blobData","blob","Blob","type","window","navigator","msSaveBlob","blobURL","URL","createObjectURL","webkitURL","tempLink","document","createElement","style","display","href","setAttribute","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","async","getBoardList","pageNo","response","axios","params","result","error","console","log","status","apiAuth","createBoard","multipartFormData","dbBoard","readBoard","bno","hit","board","downloadBoardAttach","responseType","deleteBoard","updateBoard","rout","useRoute","query","ref","battach","router","useRouter","getBoard","apiBoard","then","value","downloadBattach","fileDownload","battachoname","handleRemove","push","__exports__"],"sourceRoot":""}